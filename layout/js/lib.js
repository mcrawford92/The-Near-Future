function e_ObserverList(){this.eObserverList=[]}function e_Subject(){this.eObservers=new e_ObserverList}function e_Observer(){this.update=function(e){this.handleEvent(e)}}function preventDefault(e){e=e||window.event,e.preventDefault&&e.preventDefault(),e.returnValue=!1}function preventDefaultForScrollKeys(e){return keys[e.keyCode]?(preventDefault(e),!1):void 0}function disableScroll(){window.addEventListener&&window.addEventListener("DOMMouseScroll",preventDefault,!1),window.onwheel=preventDefault,window.onmousewheel=document.onmousewheel=preventDefault,window.ontouchmove=preventDefault,document.onkeydown=preventDefaultForScrollKeys}function enableScroll(){window.removeEventListener&&window.removeEventListener("DOMMouseScroll",preventDefault,!1),window.onmousewheel=document.onmousewheel=null,window.onwheel=null,window.ontouchmove=null,document.onkeydown=null}var Page=function(e,t){if(this.settings={animations:!0,pageTitle:"Abstract"},this.$el=t||null,null==this.$el)throw new Error("Element is equal to null");$.extend(this.settings,e),this.Events=Events.getInstance()};Page.prototype.log=function(){console.log(this.settings.pageTitle)};var Page_City=function(e){Page.apply(this,arguments),$.extend(this.settings,e);return this.Events.addObserver_Click(this),this.init=function(){},this.handleEvent=function(e){switch(e.type){case"click":this.e_Click(e)}},this.e_Click=function(){},{init:this.init(id)}};Page_City.prototype=Object.create(Page.prototype),Page_City.prototype.constructor=Page_City;var Page_Body=function(e){Page.apply(this,arguments),$.extend(this.settings,e);this.Events.addObserver_Click(this);var t=new Search_SearchBar({title:"Search Bar"},$(".main_search"));this.Events.addObserver_KeyUp(t),this.Events.addObserver_Click(t),this.handleEvent=function(e){switch(e.type){case"click":this.e_Click(e)}},this.e_Click=function(){}};Page_Body.prototype=Object.create(Page.prototype),Page_Body.prototype.constructor=Page_Body;var Page_Map=function(e){Page.apply(this,arguments),this.settings={animation:{hoverSpeed:.3,states:{sidebarHover:{width:"30%"},sidebarStatic:{width:"25%"}}}},$.extend(this.settings,e);var i=this,n=(this.$el,$(".map_container"));return this.init=function(){for(this.map=new Map({},$("#map")),this.sidebar=new Map_Sidebar({},$(".map_sidebar")),this.sidebar.$el.on("mouseenter",function(e){i.sidebar.$el.hasClass("sidebar_city")||i.animateSidebarEnter(e)}).on("mouseleave",function(e){i.sidebar.$el.hasClass("sidebar_city")||i.animateSidebarLeave(e)}),this.filters=new Map_Filters({},$(".map_filters")),this.filterControls=this.filters.$el.find("li>a"),this.Events.addObserver_Click(this.filters),x=0;x<this.filterControls.length;x++)this.buildFilterListeners(x);this.Events.addObserver_Click(this)},this.buildFilterListeners=function(e){$(this.filterControls[e]).on("mouseenter",function(t){i.filters.handleEvent(t,e)}).on("mouseleave",function(t){i.filters.handleEvent(t,e)})},this.animateSidebarEnter=function(){var e=this.settings.animation.hoverSpeed,t=27,i=100-t;TweenLite.to(this.sidebar.$el[0],e,{width:t+"%",ease:Power3.easeOut}),TweenLite.to(n[0],e,{width:i+"%",ease:Power3.easeOut})},this.animateSidebarLeave=function(){var e=this.settings.animation.hoverSpeed/1.5,t=25,i=100-t;TweenLite.to(this.sidebar.$el[0],e,{width:t+"%",ease:Power3.easeOut}),TweenLite.to(n[0],e,{width:i+"%",ease:Power3.easeOut})},this.animateCityIntro=function(){var e=this.settings.animation.hoverSpeed,t=70,i=100-t;TweenLite.to(this.sidebar.$el[0],e,{width:t+"%",ease:Power3.easeOut}),TweenLite.to(n[0],e,{width:i+"%",ease:Power3.easeOut}),this.sidebar.$el.addClass("sidebar_city"),this.filters.animateHide(),this.map.animateFullHeight()},this.animateCityOutro=function(){var e=this.settings.animation.hoverSpeed,t=25,i=100-t;TweenLite.to(this.sidebar.$el[0],e,{width:t+"%",ease:Power3.easeOut}),TweenLite.to(n[0],e,{width:i+"%",ease:Power3.easeOut}),this.sidebar.$el.removeClass("sidebar_city")},this.handleEvent=function(e){switch(e.type){case"click":this.e_Click(e)}},this.e_Click=function(e){t=e.target,"A"!==e.target.nodeName&&(t=e.target.parentElement);var i=$(t);if("A"==t.nodeName&&i.hasClass("l_city")){var n=i.data("city"),s=i.data("state"),o=i.data("post-id");this.sidebar.goTo_City(n,s,o),this.animateCityIntro()}return!1},this.init(),{init:function(){i.map.init()},allowScrollwheel:function(){i.map.allowScrollwheel()},cityZoom:function(e){i.map.cityZoom(e)}}};Page_Map.prototype=Object.create(Page.prototype),Page_Map.prototype.constructor=Page_Map;var Page_Splash=function(e){Page.apply(this,arguments),this.settings={animationSpeed:.5},$.extend(this.settings,e);var t=this.$el,i=this;this.Events.addObserver_Scroll(this);var n=!1,s=new Splash_SplashLogo({},$(".splash_header>figure img"));this.Events.addObserver_MouseMove(s),this.handleEvent=function(e){switch(e.type){case"scroll":i.e_Scroll(e)}},this.e_Scroll=function(){var e=150;0==n&&(window.pageYOffset<t.height()&&window.pageYOffset>e?(disableScroll(),s.animateTransitionToTopLeft(i.settings.animationSpeed),TweenLite.to(window,i.settings.animationSpeed,{scrollTo:{y:t.height()},ease:Power2.easeOut,onComplete:function(){enableScroll(),pageMap&&pageMap.allowScrollwheel(),t.css({position:"absolute",width:"auto",height:"auto"})}}),n=!0):window.pageYOffset<e&&TweenLite.to(window,1,{scrollTo:{y:0},ease:Power2.easeOut,overwrite:"all"}))}};Page_Splash.prototype=Object.create(Page.prototype),Page_Splash.prototype.constructor=Page_Splash;var Animation=function(e,t){if(this.settings={animate:!0,animationSpeed:.4,delay:200,animationSpeed_MouseFollow:100,states:null},this.$el=t||null,null==this.$el)throw new Error("Element is equal to null");$.extend(this.settings,e)};Animation.prototype.log=function(){console.log("Working!")},Animation.prototype.animate=function(){throw new Error("What are you doing? I'm still abstract.")},Animation.prototype.stopAnimation=function(){throw new Error("What are you doing? I'm still abstract.")},Animation.prototype.handleEvent=function(){throw new Error("What are you doing? I'm still abstract.")};var Module=function(e,t){if(this.settings={title:"Page Object",animated:!0,interactive:!0},this.$el=t||null,null==this.$el)throw new Error("Element is equal to null");$.extend(this.settings,e)};Module.prototype.log=function(){console.log("Page Object: "+this.settings.title)},Module.prototype.animate=function(){throw new Error("What are you doing? I'm still abstract.")},Module.prototype.stopAnimation=function(){throw new Error("What are you doing? I'm still abstract.")},Module.prototype.handleEvent=function(){throw new Error("What are you doing? I'm still abstract.")};var Splash_SplashLogo=function(){Animation.apply(this,arguments);var e={animationDistance:100,allowMouseFollow:!1,adjustYPoint:"middle",adjustXPoint:"center",mouseFollow:{reactAmount:.1,layerDivide:1.3,reactSpeed:.1},states:{startState:{"margin-left":"-100px",opacity:0},staticState:{"margin-left":0,opacity:1},topCenterState:{top:0,width:"15%",easing:Power2.easeInOut},topLeftState:{top:0,left:0,"-webkit-transform":"none","-moz-transform":"none","-ms-transform":"none","-o-transform":"none",transform:"none",width:"15%",easing:Power2.easeInOut},middleCenterState:{top:"30%",width:"40%"}}};$.extend(this.settings,e);var t=this.$el,i=this;return this.animate=function(){for(var e=0;e<t.length;e++)i.delayAnimation(e)},this.animatePiece=function(e,t,i){TweenLite.to(e[0],i,t)},this.delayAnimation=function(e){var n=this.settings.delay;setTimeout(function(){i.animatePiece(t.eq(e),i.settings.states.staticState,i.settings.animationSpeed),e==t.length-1&&(i.settings.allowMouseFollow=!0)},n*e)},this.animateTransitionToTopCenter=function(e){null==e&&(e=1),TweenLite.to(t.parent(),e,this.settings.states.topCenterState),this.changeAdjustYPoint("top"),this.changeAdjustXPoint("center"),this.setReactAmount(.05)},this.animateTransitionToTopLeft=function(e){null==e&&(e=1),TweenLite.to(t.parent(),e,this.settings.states.topLeftState),this.changeAdjustYPoint("top"),this.changeAdjustXPoint("left"),this.setReactAmount(.05)},this.animateTransitionToMiddleCenter=function(e){null==e&&(e=1),TweenLite.to(t.parent(),e,this.settings.states.middleCenterState),this.changeAdjustYPoint("middle"),this.changeAdjustXPoint("center")},this.handleEvent=function(e){switch(e.type){case"mousemove":this.animateMouseFollow(e)}},this.animateMouseFollow=function(e){if(1==this.settings.allowMouseFollow)for(var n=this.settings.mouseFollow.reactAmount,s=this.settings.mouseFollow.layerDivide,o=this.settings.mouseFollow.reactSpeed,a=0;a<t.length;a++){if(a>0&&(n/=Math.pow(s,a)),"middle"==this.settings.adjustYPoint)var r=this.adjustForCenter("height",e.pageY)*n;else if("top"==this.settings.adjustYPoint)var r=e.pageY/2*n;else var r=this.adjustForCenter("height",e.pageY)*n;if("center"==this.settings.adjustXPoint)var l=this.adjustForCenter("width",e.pageX)*n;else if("left"==this.settings.adjustXPoint)var l=e.pageX/2*n;else var l=this.adjustForCenter("width",e.pageX)*n;i.animatePiece(t.eq(a),{top:r,left:l},o)}},this.adjustForCenter=function(e,t){var i,n;switch(e){case"height":i=$(window).height();break;case"width":i=$(window).width()}return n=i/2,t-n},this.changeAdjustXPoint=function(e){this.settings.adjustXPoint=e},this.changeAdjustYPoint=function(e){this.settings.adjustYPoint=e},this.setReactAmount=function(e){this.settings.mouseFollow.reactAmount=e},this.animate(),this};Splash_SplashLogo.prototype=Object.create(Animation.prototype),Splash_SplashLogo.prototype.constructor=Splash_SplashLogo;var Splash_IntroText=function(){Animation.apply(this,arguments),this.settings={},$.extend(this.settings,settings);this.$el;return this};Splash_IntroText.prototype=Object.create(Animation.prototype),Splash_IntroText.prototype.constructor=Splash_IntroText;var Map=function(){Module.apply(this,arguments);var e={};$.extend(this.settings,e);var t=this.$el;return this.style=[{featureType:"water",elementType:"geometry",stylers:[{color:"#999999"},{lightness:17}]},{featureType:"landscape",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:20}]},{featureType:"road.highway",elementType:"geometry.fill",stylers:[{color:"#ffffff"},{lightness:17}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{color:"#ffffff"},{lightness:29},{weight:.2}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:18}]},{featureType:"road.local",elementType:"geometry",stylers:[{color:"#ffffff"},{lightness:16}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#f5f5f5"},{lightness:21}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#dedede"},{lightness:21}]},{elementType:"labels.text.stroke",stylers:[{visibility:"on"},{color:"#ffffff"},{lightness:16}]},{elementType:"labels.text.fill",stylers:[{saturation:36},{color:"#333333"},{lightness:40}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{featureType:"transit",elementType:"geometry",stylers:[{color:"#f2f2f2"},{lightness:19}]},{featureType:"administrative",elementType:"geometry.fill",stylers:[{color:"#fefefe"},{lightness:20}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#fefefe"},{lightness:17},{weight:1.2}]}],this.init=function(){console.log("init"),this.map=new google.maps.Map(t[0],{center:{lat:37.19,lng:-93.28},zoom:4,scrollwheel:!1,disableDefaultUI:!0,styles:this.style})},this.allowScrollwheel=function(){this.map.setOptions({scrollwheel:!0})},this.cityZoom=function(){console.log("I'm zooming into this city.")},this.animateFullHeight=function(){TweenLite.to(t,.5,{height:"100%"})},this};Map.prototype=Object.create(Module.prototype),Map.prototype.constructor=Map;var Map_Filters=function(){Module.apply(this,arguments);var e={};$.extend(this.settings,e);var t=this.$el,i=this,n=$(".filters_form"),s=$(".filters_form>ul>li");return this.handleEvent=function(e,t){switch(e.type){case"mouseenter":i.animateFilterControlMouseEnter(e,t);break;case"mouseleave":i.animateFilterControlMouseLeave(e,t);break;case"click":i.animateFilterClick(e)}},this.animateFilterControlMouseEnter=function(e,t){s.eq(t+1)},this.animateFilterControlMouseLeave=function(e,t){s.eq(t+1)},this.animateFilterClick=function(e){var t=e.target;"SPAN"==t.nodeName&&(t=t.parentElement);var n=this.findFilterLiPosition(t);n&&(s.eq(n).hasClass("open")?i.animateOutro(s[n]):i.animateIntro(s[n]))},this.animateIntro=function(e){TweenLite.to(e,.5,{height:"100%",top:"-100%"}),$(e).addClass("open")},this.animateOutro=function(e){TweenLite.to(e,.5,{height:"10%",top:"-10%"}),$(e).removeClass("open")},this.animateHide=function(){TweenLite.to(t[0],.5,{height:"0",top:"50%"}),TweenLite.to(n[0],.5,{height:"0",top:"50%"})},this.findFilterLiPosition=function(e){for(var t=$(e.parentElement),i=t[0].parentElement.childElementCount,n=0,s=0;i>s;s++)t[0]==t[0].parentElement.children[s]&&(n=s);return 0==n?n=null:$(t[0].parentElement.parentElement).hasClass("map_filters")||(n=null),n},this};Map_Filters.prototype=Object.create(Module.prototype),Map_Filters.prototype.constructor=Map_Filters;var Map_Sidebar=function(){Module.apply(this,arguments);var e={};$.extend(this.settings,e);var t=this.$el;return this.handleEvent=function(e){switch(e.type){case"click":this.e_Click(e)}},this.e_Click=function(){},this.goTo_City=function(e){var i="\n								<header>\n									<h2>"+e+"<span>Missouri</span></h2>\n								</header>\n								<main>\n\n								</main>\n								<footer>\n\n								</footer>\n							";TweenLite.to(t.find("footer")[0],.2,{opacity:"0",display:"none"}),TweenLite.to(t.find("article")[0],.2,{opacity:0,onComplete:function(){t.html(i);var e={opacity:1},n={"padding-left":"30px"};TweenLite.to(t.find("header")[0],.5,e),TweenLite.to(t[0],.5,n)}})},this};Map_Sidebar.prototype=Object.create(Module.prototype),Map_Sidebar.prototype.constructor=Map_Sidebar;var Search_SearchBar=function(){Module.apply(this,arguments);var e=.75,t={hideOnStart:!0,animation:{animationSpeed:e,animationIntro:{expand:{display:"block",width:"100%",ease:Power2.easeOut,onComplete:function(){i.find("input")[0].focus()}},formFade:{opacity:1,delay:.5*e}},animationOutro:{collapse:{display:"none",width:"0",ease:Power2.easeOut,delay:.5*e,onComplete:function(){i.css({"float":"left"})}},formFade:{opacity:0}}}};$.extend(this.settings,t);var i=this.$el,n=this;return this.results=new Search_Results({},$(".search_results")),this.animateIntro=function(){var e=n.settings.animation.animationIntro,t=n.settings.animation;TweenLite.to(i[0],t.animationSpeed,e.expand),TweenLite.to(i.find("form")[0],t.animationSpeed,e.formFade)},this.animateOutro=function(){var e=n.settings.animation.animationOutro,t=n.settings.animation;i.css({"float":"right"}),TweenLite.to(i[0],t.animationSpeed,e.collapse),TweenLite.to(i.find("form")[0],t.animationSpeed,e.formFade),this.results.animateOutro()},this.handleEvent=function(e){switch(e.type){case"keyup":n.e_KeyUp(e);break;case"click":n.e_Click(e)}},this.e_Click=function(e){"close_search"==e.target.id&&this.animateOutro()},this.e_KeyUp=function(e){var t=32,n=83,s=70,o=88,a=27;if(i.find("input").is(":focus")||e.keyCode==a)e.keyCode==a?this.animateOutro():this.results.searchFor(i.find("input").val());else switch(e.keyCode){case t:this.animateIntro();break;case n:this.animateIntro();break;case s:this.animateIntro();break;case o:this.animateOutro()}},this};Search_SearchBar.prototype=Object.create(Module.prototype),Search_SearchBar.prototype.constructor=Search_SearchBar;var Search_Results=function(){Module.apply(this,arguments);var e={animation:{animationSpeed:.3,animationIntro:{expand:{display:"block",top:"0",opacity:"1"}},animationOutro:{collapse:{display:"none",top:"10%",opacity:"0"}}}};$.extend(this.settings,e);var t=[{type:"agency",title:"Deep Group",city:"Springfield",state:"Missouri",specialties:["Branding","Illustration","Advertising"],firmSize:"10-20"},{type:"person",title:"Michael Crawford",city:"Springfield",state:"Missouri",specialties:["Concepting","Interactive","Web Development","Poster"],firms:[{title:"Deep Group",position:"Creative Intern"},{title:"Alchemedia Project",position:"Interactive Design Intern"},{title:"417 Magazine",position:"Advertising Intern"}]},{type:"person",title:"Alexis Reid",city:"New York City",state:"New York",specialties:["Identity","Branding","Concepting","Art Direction","Interactive"],firms:[{title:"Mucca Design",position:"Creative Intern"},{title:"McCann",position:"Junior Art Director"},{title:"Willoughby Design",position:"Creative Intern"}]},{type:"person",title:"Dan Stewart",city:"Springfield",state:"Missouri",specialties:["Identity","Concepting","Art Direction"],firms:[{title:"Deep Group",position:"Creative Director"}]},{type:"agency",title:"The Alchemedia Project",city:"Springfield",state:"Missouri",specialties:["Interactive","Illustration","Advertising"],firmSize:"25+"},{type:"city",title:"Springfield, Missouri",city:"Springfield",state:"Missouri",specialties:["Interactive","Illustration","Advertising"],numberOfCreatives:"25"}];this.animateIntro=function(){var e=n.settings.animation.animationIntro,t=n.settings.animation;TweenLite.to(i[0],t.animationSpeed,e.expand)},this.animateOutro=function(){var e=n.settings.animation.animationOutro,t=n.settings.animation;TweenLite.to(i[0],t.animationSpeed,e.collapse)},this.searchFor=function(e){var t=this.queryDatabase(e),n="",s="",o=[];for(x=0;x<t.length;x++)s=t[x].title,o=s.toLowerCase().search(e.toLowerCase()),-1!=o&&(s=s.substr(0,o)+"<span>"+s.substr(o,e.length)+"</span>"+s.substr(o+e.length,s.length)),n+='<li><a href="#" id="'+t[x].type+'" data-postid="null">'+s+" <small>"+t[x].type+"</small></a></li>";i.find("ul").html(n),this.animateIntro()},this.queryDatabase=function(){return t};var i=this.$el,n=this};Search_Results.prototype=Object.create(Module.prototype),Search_Results.prototype.constructor=Search_Results;var Events=function(){function e(){var e=this;return this.e_MouseMove=new e_Subject,this.e_KeyUp=new e_Subject,this.e_Click=new e_Subject,this.e_Scroll=new e_Subject,this.e_MouseEnter=new e_Subject,this.e_MouseLeave=new e_Subject,$(document).on("mousemove",function(t){e.e_MouseMove.notify(t)}).on("keyup",function(t){e.e_KeyUp.notify(t)}).on("click",function(t){e.e_Click.notify(t)}).on("scroll",function(t){e.e_Scroll.notify(t)}).on("mouseenter",function(t){e.e_MouseEnter.notify(t)}).on("mouseleave",function(t){e.e_MouseLeave.notify(t)}),{addObserver_MouseEnter:function(t){$.extend(t,new e_Observer),e.e_MouseEnter.addObserver(t)},removeObserver_MouseEnter:function(t){e.e_MouseEnter.removeObserver(t)},addObserver_MouseLeave:function(t){$.extend(t,new e_Observer),e.e_MouseLeave.addObserver(t)},removeObserver_MouseLeave:function(t){e.e_MouseLeave.removeObserver(t)},addObserver_MouseMove:function(t){$.extend(t,new e_Observer),e.e_MouseMove.addObserver(t)},removeObserver_MouseMove:function(t){e.e_MouseMove.removeObserver(t)},addObserver_KeyUp:function(t){$.extend(t,new e_Observer),e.e_KeyUp.addObserver(t)},removeObserver_KeyUp:function(t){e.e_KeyUp.removeObserver(t)},addObserver_Click:function(t){$.extend(t,new e_Observer),e.e_Click.addObserver(t)},removeObserver_Click:function(t){e.e_Click.removeObserver(t)},addObserver_Scroll:function(t){$.extend(t,new e_Observer),e.e_Scroll.addObserver(t)},removeObserver_Scroll:function(t){e.e_Scroll.removeObserver(t)}}}var t;return{getInstance:function(){return t||(t=e()),t}}}();e_ObserverList.prototype.add=function(e){return this.eObserverList.push(e)},e_ObserverList.prototype.count=function(){return this.eObserverList.length},e_ObserverList.prototype.get=function(e){return e>-1&&e<this.eObserverList.length?this.eObserverList[e]:void 0},e_ObserverList.prototype.indexOf=function(e,t){for(var i=t;i<this.eObserverList.length;){if(this.eObserverList[i]===e)return i;i++}return-1},e_ObserverList.prototype.remove=function(e){this.eObserverList.splice(e,1)},e_Subject.prototype.addObserver=function(e){this.eObservers.add(e)},e_Subject.prototype.removeObserver=function(e){this.eObservers.remove(this.eObservers.indexOf(e,0))},e_Subject.prototype.notify=function(e){for(var t=this.eObservers.count(),i=0;t>i;i++)this.eObservers.get(i).update(e)};